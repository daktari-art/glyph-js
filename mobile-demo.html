<!DOCTYPE html>
<html>
<head>
    <title>Glyph.js Mobile Demo</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 20px auto; padding: 20px; }
        .glyph-panel { border: 2px solid #1971c2; border-radius: 8px; padding: 15px; background: #f8f9fa; margin: 20px 0; }
        .function-call { background: white; margin: 10px 0; padding: 10px; border-radius: 6px; border-left: 4px solid #1971c2; }
        button { padding: 12px 20px; margin: 10px 5px; font-size: 16px; cursor: pointer; }
        .status { padding: 2px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }
        .started { background: #fff3bf; color: #e67700; }
        .completed { background: #d3f9d8; color: #2b8a3e; }
        .errored { background: #ffe3e3; color: #c92a2a; }
    </style>
</head>
<body>
    <h1>üîÆ Glyph.js Mobile Demo</h1>
    <p>This simulates what the Glyph.js Chrome extension will display when built.</p>
    
    <button onclick="simulateConsoleLog()">Test console.log</button>
    <button onclick="simulateAsync()">Test Async Function</button>
    <button onclick="simulateError()">Test Error</button>
    <button onclick="clearLogs()">Clear Logs</button>
    
    <div class="glyph-panel">
        <h3>üéØ Glyph.js Visualization Panel</h3>
        <div id="functionCalls">
            <div style="text-align: center; color: #666; padding: 20px;">
                No function calls yet...<br>
                <small>Click buttons above to simulate Glyph in action</small>
            </div>
        </div>
    </div>

    <script>
        let functionCalls = [];
        
        function simulateConsoleLog() {
            addFunctionCall('console.log', ['üîÆ Hello from Glyph!', { user: 'test', id: 123 }], 'started');
            
            setTimeout(() => {
                updateFunctionCall('console.log', 'completed', 'Message logged successfully');
            }, 600);
        }
        
        function simulateAsync() {
            addFunctionCall('fetch', ['https://api.example.com/data'], 'started');
            
            setTimeout(() => {
                updateFunctionCall('fetch', 'completed', { data: [{ id: 1, name: 'Sample' }] });
            }, 1200);
        }
        
        function simulateError() {
            addFunctionCall('validateUser', [{ age: 15 }], 'started');
            
            setTimeout(() => {
                updateFunctionCall('validateUser', 'errored', null, 'User must be 18 or older');
            }, 800);
        }
        
        function addFunctionCall(name, args, status, result = null) {
            const call = {
                id: Date.now() + Math.random(),
                name,
                args: args.slice(0, 2), // Limit args for display
                status,
                result,
                timestamp: new Date().toLocaleTimeString()
            };
            
            functionCalls.unshift(call); // Add to beginning
            renderFunctionCalls();
        }
        
        function updateFunctionCall(name, status, result = null, error = null) {
            const call = functionCalls.find(c => c.name === name && c.status === 'started');
            if (call) {
                call.status = status;
                call.result = result;
                call.error = error;
                renderFunctionCalls();
            }
        }
        
        function renderFunctionCalls() {
            const container = document.getElementById('functionCalls');
            
            if (functionCalls.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; color: #666; padding: 20px;">
                        No function calls yet...<br>
                        <small>Click buttons above to simulate Glyph in action</small>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = functionCalls.map(call => `
                <div class="function-call">
                    <div style="display: flex; justify-content: between; align-items: center;">
                        <strong>${call.name}()</strong>
                        <span class="status ${call.status}">
                            ${getStatusIcon(call.status)} ${call.status.toUpperCase()}
                        </span>
                    </div>
                    <div style="font-size: 13px; color: #555; margin-top: 8px;">
                        <div>üïí ${call.timestamp}</div>
                        <div>üì• Args: ${JSON.stringify(call.args)}</div>
                        ${call.result ? `<div>üì§ Result: ${JSON.stringify(call.result)}</div>` : ''}
                        ${call.error ? `<div>‚ùå Error: ${call.error}</div>` : ''}
                    </div>
                </div>
            `).join('');
        }
        
        function getStatusIcon(status) {
            const icons = { started: 'üîÑ', completed: '‚úÖ', errored: '‚ùå' };
            return icons[status] || '‚ö™';
        }
        
        function clearLogs() {
            functionCalls = [];
            renderFunctionCalls();
        }
        
        // Initial demo call
        addFunctionCall('pageLoad', [], 'completed', 'Glyph demo ready!');
    </script>
</body>
</html>
